<div class="settings fade-in">

  <div class="page-header">
    <h1 class="page-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
    <p class="page-sub">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏ –∏ –∞–∫–∫–∞—É–Ω—Ç–æ–º</p>
  </div>

  <!-- Google Account -->
  <section class="section">
    <div class="section-title">
      <span class="section-icon">‚óé</span>
      Google Account
    </div>
    <div class="card">
      @if (store.currentUser(); as user) {
        <div class="account-row">
          <div class="account-avatar">
            @if (user.picture) {
              <img [src]="user.picture" [alt]="user.name" />
            } @else {
              {{ (user.name || '?').charAt(0).toUpperCase() }}
            }
          </div>
          <div class="account-info">
            <div class="account-name">{{ user.name }}</div>
            <div class="account-email">{{ user.email }}</div>
            <div class="account-badge">‚úì –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω</div>
          </div>
          <button class="btn btn-danger" (click)="logout()">–í—ã–π—Ç–∏</button>
        </div>
      } @else {
        <div class="login-prompt">
          <div class="login-icon">‚óé</div>
          <div class="login-text">
            <div class="login-title">–í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Google</div>
            <div class="login-sub">–î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ Gmail, Calendar –∏ Tasks —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</div>
          </div>
          <button class="btn btn-primary" (click)="login()">
            –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
          </button>
        </div>
      }
    </div>
  </section>

  <!-- Jira -->
  <section class="section">
    <div class="section-title">
      <span class="section-icon">‚óâ</span>
      Jira Integration
    </div>
    <div class="card">
      <div class="form-group">
        <label class="form-label">Jira Domain</label>
        <input
          class="form-input"
          type="text"
          placeholder="your-company.atlassian.net"
          [(ngModel)]="cfg.jiraDomain"
        />
        <span class="form-hint">–ë–µ–∑ https://, –Ω–∞–ø—Ä–∏–º–µ—Ä: mycompany.atlassian.net</span>
      </div>
      <div class="form-group">
        <label class="form-label">Email</label>
        <input
          class="form-input"
          type="email"
          placeholder="your@email.com"
          [(ngModel)]="cfg.jiraEmail"
        />
      </div>
      <div class="form-group">
        <label class="form-label">API Token</label>
        <input
          class="form-input"
          type="password"
          placeholder="Jira API token"
          [(ngModel)]="cfg.jiraToken"
        />
        <span class="form-hint">
          –ü–æ–ª—É—á–∏—Ç—å: <a href="https://id.atlassian.com/manage-profile/security/api-tokens" target="_blank" rel="noopener">id.atlassian.com ‚Üí API tokens</a>
        </span>
      </div>
    </div>
  </section>

  <!-- Slack -->
  <section class="section">
    <div class="section-title">
      <span class="section-icon">‚óà</span>
      Slack Integration
    </div>
    <div class="card">
      <div class="form-group">
        <label class="form-label">Slack Bot Token</label>
        <input
          class="form-input"
          type="password"
          placeholder="xoxb-..."
          [(ngModel)]="cfg.slackToken"
        />
        <span class="form-hint">
          –ü–æ–ª—É—á–∏—Ç—å: <a href="https://api.slack.com/apps" target="_blank" rel="noopener">api.slack.com ‚Üí Your Apps ‚Üí OAuth Tokens</a>
        </span>
      </div>
    </div>
  </section>

  <!-- Theme -->
  <section class="section">
    <div class="section-title">
      <span class="section-icon">‚ó∑</span>
      –í–Ω–µ—à–Ω–∏–π –≤–∏–¥
    </div>
    <div class="card">
      <div class="theme-row">
        <div class="theme-info">
          <div class="theme-label">–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</div>
          <div class="theme-sub">–¢–µ–∫—É—â–∞—è: {{ isLight() ? '–°–≤–µ—Ç–ª–∞—è' : '–¢—ë–º–Ω–∞—è' }}</div>
        </div>
        <button class="btn btn-secondary" (click)="toggleTheme()">
          {{ isLight() ? 'üåô –¢—ë–º–Ω–∞—è' : '‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è' }}
        </button>
      </div>
    </div>
  </section>

  <!-- Save -->
  <div class="save-row">
    <button class="btn btn-primary btn-lg" (click)="save()">
      @if (saved()) { ‚úì –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ } @else { –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ }
    </button>
  </div>

</div>
