<div class="fade-in">
  @if (events() === null) {
    <div class="card"><app-skeleton-loader [count]="5" /></div>
  } @else {
    @if (focusSlots().length > 0) {
      <div class="focus-banner">
        <span class="focus-icon">üß†</span>
        <span>–§–æ–∫—É—Å-–≤—Ä–µ–º—è —Å–µ–≥–æ–¥–Ω—è: <strong>{{ totalFocus() | fmtDur }}</strong></span>
        <div class="focus-slots">
          @for (slot of focusSlots(); track slot.start) {
            <span class="focus-slot">{{ calSvc.formatTime(slot.start) }}‚Äì{{ calSvc.formatTime(slot.end) }}</span>
          }
        </div>
      </div>
    }

    <div class="card">
      <div class="card-header">
        <div class="card-title"><div class="dot" style="background: var(--green)"></div>–°–µ–≥–æ–¥–Ω—è</div>
        <div class="card-count">{{ (regularEvents() || []).length }} —Å–æ–±—ã—Ç–∏–π</div>
      </div>
      <div class="card-body">
        @if ((regularEvents() || []).length === 0) {
          <div class="empty">–ù–µ—Ç —Å–æ–±—ã—Ç–∏–π –Ω–∞ —Å–µ–≥–æ–¥–Ω—è üéâ</div>
        } @else {
          @for (ev of regularEvents(); track ev.id) {
            <div class="event-row">
              <div class="event-time">{{ formatRange(ev.start, ev.end) }}</div>
              <div class="event-bar" [style.background]="getColor(ev)"></div>
              <div class="event-info">
                <div class="event-title">{{ ev.title }}</div>
                <div class="event-meta">
                  {{ formatDur(ev.start, ev.end) | fmtDur }}
                  @if (ev.attendeesCount) { ¬∑ {{ ev.attendeesCount }} —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ }
                  @if (ev.location) { ¬∑ üìç {{ ev.location }} }
                </div>
              </div>
              @if (ev.hangoutLink) {
                <a [href]="ev.hangoutLink" target="_blank" class="meet-btn">Meet ‚Üí</a>
              }
            </div>
          }
        }
      </div>
    </div>
  }
</div>
